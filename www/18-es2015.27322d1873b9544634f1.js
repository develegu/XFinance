(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"/yGZ":function(l,n,u){"use strict";u.r(n);var o=u("8Y7J");class e{}var a=u("pMnS"),t=u("oGqa"),i=u("oBZk"),r=u("ZZ/e"),s=u("s7LF"),b=u("mrSG"),g=u("E3Cs"),d=u("XY7g"),c=u("toH5");class h{constructor(l,n,u,o){this.modalController=l,this.db=n,this.localStorage=u,this.gf=o,this.login={email:"",password:""},this.errors={email:"",password:""}}openModal(){return b.__awaiter(this,void 0,void 0,(function*(){const l=yield this.modalController.create({component:g.a,componentProps:{myParam:"test"}});l.onDidDismiss().then(l=>{null!==l&&console.log("The result:",l.data)}),yield l.present()}))}ngOnInit(){this.gf.DisableSideMenu(),this.gf.CheckLogin()}Login(){this.gf.loginUser(this.login).then(l=>{l.user&&(console.log("User returned"),console.log(l.user),this.db.collection(d.a.FB_Usuarios).doc(l.user.uid).get().subscribe(n=>{console.log("Search"),console.log(n.data()),n.data()[d.a.key]=l.user.uid,this.localStorage.set("user",n.data()),d.a.usuario=n.data(),this.login={email:"",password:""},this.gf.ListenersClientesPagos(),this.gf.ListenersColaboradores(),this.gf.EnableSideMenu(),this.gf.IrAClientes()}))}).catch(l=>{"auth/wrong-password"===l.code&&(this.errors.password="La contrase\xf1a es incorrecta"),"auth/user-not-found"===l.code&&(this.errors.email="No existe usuario con ese mail"),"auth/invalid-email"===l.code&&(this.errors.email="El formato de mail es incorrecto"),console.log("login error"),console.log(l)})}}var p=u("Xr7G"),C=u("xgBC"),B=o.pb({encapsulation:0,styles:[[".welcome-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}"]],data:{}});function m(l){return o.Lb(0,[(l()(),o.rb(0,0,null,null,10,"ion-header",[],null,null,null,i.G,i.h)),o.qb(1,49152,null,0,r.z,[o.h,o.k,o.x],null,null),(l()(),o.rb(2,0,null,0,8,"ion-toolbar",[],null,null,null,i.X,i.y)),o.qb(3,49152,null,0,r.Ab,[o.h,o.k,o.x],null,null),(l()(),o.rb(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,i.B,i.c)),o.qb(5,49152,null,0,r.j,[o.h,o.k,o.x],null,null),(l()(),o.rb(6,0,null,0,1,"ion-menu-button",[],null,null,null,i.M,i.o)),o.qb(7,49152,null,0,r.P,[o.h,o.k,o.x],null,null),(l()(),o.rb(8,0,null,0,2,"ion-title",[],null,null,null,i.W,i.x)),o.qb(9,49152,null,0,r.yb,[o.h,o.k,o.x],null,null),(l()(),o.Jb(-1,0,[" Login "])),(l()(),o.rb(11,0,null,null,22,"ion-content",[],null,null,null,i.D,i.e)),o.qb(12,49152,null,0,r.s,[o.h,o.k,o.x],null,null),(l()(),o.rb(13,0,null,0,8,"ion-col",[],null,null,null,i.C,i.d)),o.qb(14,49152,null,0,r.r,[o.h,o.k,o.x],null,null),(l()(),o.rb(15,0,null,0,6,"ion-input",[["placeholder","Mail"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,u){var e=!0,a=l.component;return"ionBlur"===n&&(e=!1!==o.Db(l,17)._handleBlurEvent(u.target)&&e),"ionChange"===n&&(e=!1!==o.Db(l,17)._handleInputEvent(u.target)&&e),"ngModelChange"===n&&(e=!1!==(a.login.email=u)&&e),e}),i.I,i.j)),o.qb(16,49152,null,0,r.E,[o.h,o.k,o.x],{placeholder:[0,"placeholder"]},null),o.qb(17,16384,null,0,r.Nb,[o.k],null,null),o.Gb(1024,null,s.c,(function(l){return[l]}),[r.Nb]),o.qb(19,671744,null,0,s.f,[[8,null],[8,null],[8,null],[6,s.c]],{model:[0,"model"]},{update:"ngModelChange"}),o.Gb(2048,null,s.d,null,[s.f]),o.qb(21,16384,null,0,s.e,[[4,s.d]],null,null),(l()(),o.rb(22,0,null,0,8,"ion-col",[],null,null,null,i.C,i.d)),o.qb(23,49152,null,0,r.r,[o.h,o.k,o.x],null,null),(l()(),o.rb(24,0,null,0,6,"ion-input",[["placeholder","Contrase\xf1a"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,u){var e=!0,a=l.component;return"ionBlur"===n&&(e=!1!==o.Db(l,26)._handleBlurEvent(u.target)&&e),"ionChange"===n&&(e=!1!==o.Db(l,26)._handleInputEvent(u.target)&&e),"ngModelChange"===n&&(e=!1!==(a.login.password=u)&&e),e}),i.I,i.j)),o.qb(25,49152,null,0,r.E,[o.h,o.k,o.x],{placeholder:[0,"placeholder"]},null),o.qb(26,16384,null,0,r.Nb,[o.k],null,null),o.Gb(1024,null,s.c,(function(l){return[l]}),[r.Nb]),o.qb(28,671744,null,0,s.f,[[8,null],[8,null],[8,null],[6,s.c]],{model:[0,"model"]},{update:"ngModelChange"}),o.Gb(2048,null,s.d,null,[s.f]),o.qb(30,16384,null,0,s.e,[[4,s.d]],null,null),(l()(),o.rb(31,0,null,0,2,"ion-button",[],null,[[null,"click"]],(function(l,n,u){var o=!0;return"click"===n&&(o=!1!==l.component.Login()&&o),o}),i.A,i.b)),o.qb(32,49152,null,0,r.i,[o.h,o.k,o.x],null,null),(l()(),o.Jb(-1,0,["Atras "]))],(function(l,n){var u=n.component;l(n,16,0,"Mail"),l(n,19,0,u.login.email),l(n,25,0,"Contrase\xf1a"),l(n,28,0,u.login.password)}),(function(l,n){l(n,15,0,o.Db(n,21).ngClassUntouched,o.Db(n,21).ngClassTouched,o.Db(n,21).ngClassPristine,o.Db(n,21).ngClassDirty,o.Db(n,21).ngClassValid,o.Db(n,21).ngClassInvalid,o.Db(n,21).ngClassPending),l(n,24,0,o.Db(n,30).ngClassUntouched,o.Db(n,30).ngClassTouched,o.Db(n,30).ngClassPristine,o.Db(n,30).ngClassDirty,o.Db(n,30).ngClassValid,o.Db(n,30).ngClassInvalid,o.Db(n,30).ngClassPending)}))}function f(l){return o.Lb(0,[(l()(),o.rb(0,0,null,null,1,"app-login",[],null,null,null,m,B)),o.qb(1,114688,null,0,h,[r.Fb,p.a,C.b,c.a],null,null)],(function(l,n){l(n,1,0)}),null)}var v=o.nb("app-login",h,f,{},{},[]),D=u("SVse"),k=u("VQoA"),q=u("iInd"),w=u("iQDS"),x=u("mXY3");class M{}u.d(n,"LoginModuleNgFactory",(function(){return y}));var y=o.ob(e,[],(function(l){return o.Ab([o.Bb(512,o.j,o.Z,[[8,[a.a,t.a,v]],[3,o.j],o.v]),o.Bb(4608,D.l,D.k,[o.s,[2,D.s]]),o.Bb(4608,r.b,r.b,[o.x,o.g]),o.Bb(4608,r.Fb,r.Fb,[r.b,o.j,o.p]),o.Bb(4608,r.Jb,r.Jb,[r.b,o.j,o.p]),o.Bb(4608,s.a,s.a,[]),o.Bb(4608,s.i,s.i,[]),o.Bb(1073742336,D.b,D.b,[]),o.Bb(1073742336,k.a,k.a,[]),o.Bb(1073742336,k.g,k.g,[]),o.Bb(1073742336,k.d,k.d,[]),o.Bb(1073742336,k.b,k.b,[]),o.Bb(1073742336,k.e,k.e,[]),o.Bb(1073742336,k.c,k.c,[]),o.Bb(1073742336,k.f,k.f,[]),o.Bb(1073742336,r.Cb,r.Cb,[]),o.Bb(1073742336,q.o,q.o,[[2,q.t],[2,q.m]]),o.Bb(1073742336,s.h,s.h,[]),o.Bb(1073742336,s.g,s.g,[]),o.Bb(1073742336,s.b,s.b,[]),o.Bb(1073742336,w.a,w.a,[]),o.Bb(1073742336,x.a,x.a,[]),o.Bb(1073742336,M,M,[]),o.Bb(1073742336,e,e,[]),o.Bb(1024,q.k,(function(){return[[{path:"",component:h}]]}),[])])}))}}]);