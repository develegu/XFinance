(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"/yGZ":function(l,n,u){"use strict";u.r(n);var o=u("8Y7J");class e{}var i=u("pMnS"),t=u("oGqa"),a=u("oBZk"),s=u("ZZ/e"),r=u("s7LF"),b=u("mrSG"),g=u("E3Cs"),c=u("XY7g"),d=u("toH5");class h{constructor(l,n,u,o){this.modalController=l,this.db=n,this.localStorage=u,this.gf=o,this.login={email:"",password:""},this.errors={email:"",password:""}}openModal(){return b.__awaiter(this,void 0,void 0,(function*(){const l=yield this.modalController.create({component:g.a,componentProps:{myParam:"test"}});l.onDidDismiss().then(l=>{null!==l&&console.log("The result:",l.data)}),yield l.present()}))}ngOnInit(){this.gf.DisableSideMenu(),this.gf.CheckLogin()}Login(){this.gf.loginUser(this.login).then(l=>{l.user&&(console.log("User returned"),console.log(l.user),this.db.collection(c.b.FB_Usuarios).doc(l.user.uid).get().subscribe(n=>{console.log("Search"),c.b.usuario=n.data(),c.b.usuario[c.b.key]=l.user.uid,console.log(c.b.usuario[c.b.key]),this.localStorage.set("user",c.b.usuario),this.login={email:"",password:""},this.gf.ListenersClientesPagos(),this.gf.ListenersColaboradores(),this.gf.EnableSideMenu(),void 0===c.b.usuario[c.b.organizacion]||this.gf.IrAClientes()}))}).catch(l=>{"auth/wrong-password"===l.code&&(this.errors.password="La contrase\xf1a es incorrecta"),"auth/user-not-found"===l.code&&(this.errors.email="No existe usuario con ese mail"),"auth/invalid-email"===l.code&&(this.errors.email="El formato de mail es incorrecto"),console.log("login error"),console.log(l)})}}var p=u("Xr7G"),m=u("xgBC"),C=o.zb({encapsulation:0,styles:[[".welcome-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}"]],data:{}});function L(l){return o.Vb(0,[(l()(),o.Bb(0,0,null,null,10,"ion-header",[],null,null,null,a.H,a.h)),o.Ab(1,49152,null,0,s.B,[o.j,o.p,o.F],null,null),(l()(),o.Bb(2,0,null,0,8,"ion-toolbar",[],null,null,null,a.Z,a.z)),o.Ab(3,49152,null,0,s.Cb,[o.j,o.p,o.F],null,null),(l()(),o.Bb(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,a.C,a.c)),o.Ab(5,49152,null,0,s.l,[o.j,o.p,o.F],null,null),(l()(),o.Bb(6,0,null,0,1,"ion-menu-button",[],null,null,null,a.O,a.p)),o.Ab(7,49152,null,0,s.R,[o.j,o.p,o.F],null,null),(l()(),o.Bb(8,0,null,0,2,"ion-title",[],null,null,null,a.Y,a.y)),o.Ab(9,49152,null,0,s.Ab,[o.j,o.p,o.F],null,null),(l()(),o.Tb(-1,0,[" Login "])),(l()(),o.Bb(11,0,null,null,22,"ion-content",[],null,null,null,a.E,a.e)),o.Ab(12,49152,null,0,s.u,[o.j,o.p,o.F],null,null),(l()(),o.Bb(13,0,null,0,8,"ion-col",[],null,null,null,a.D,a.d)),o.Ab(14,49152,null,0,s.t,[o.j,o.p,o.F],null,null),(l()(),o.Bb(15,0,null,0,6,"ion-input",[["placeholder","Mail"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,u){var e=!0,i=l.component;return"ionBlur"===n&&(e=!1!==o.Nb(l,17)._handleBlurEvent(u.target)&&e),"ionChange"===n&&(e=!1!==o.Nb(l,17)._handleInputEvent(u.target)&&e),"ngModelChange"===n&&(e=!1!==(i.login.email=u)&&e),e}),a.K,a.k)),o.Ab(16,49152,null,0,s.G,[o.j,o.p,o.F],{placeholder:[0,"placeholder"]},null),o.Ab(17,16384,null,0,s.Pb,[o.p],null,null),o.Qb(1024,null,r.c,(function(l){return[l]}),[s.Pb]),o.Ab(19,671744,null,0,r.f,[[8,null],[8,null],[8,null],[6,r.c]],{model:[0,"model"]},{update:"ngModelChange"}),o.Qb(2048,null,r.d,null,[r.f]),o.Ab(21,16384,null,0,r.e,[[4,r.d]],null,null),(l()(),o.Bb(22,0,null,0,8,"ion-col",[],null,null,null,a.D,a.d)),o.Ab(23,49152,null,0,s.t,[o.j,o.p,o.F],null,null),(l()(),o.Bb(24,0,null,0,6,"ion-input",[["placeholder","Contrase\xf1a"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(l,n,u){var e=!0,i=l.component;return"ionBlur"===n&&(e=!1!==o.Nb(l,26)._handleBlurEvent(u.target)&&e),"ionChange"===n&&(e=!1!==o.Nb(l,26)._handleInputEvent(u.target)&&e),"ngModelChange"===n&&(e=!1!==(i.login.password=u)&&e),e}),a.K,a.k)),o.Ab(25,49152,null,0,s.G,[o.j,o.p,o.F],{placeholder:[0,"placeholder"]},null),o.Ab(26,16384,null,0,s.Pb,[o.p],null,null),o.Qb(1024,null,r.c,(function(l){return[l]}),[s.Pb]),o.Ab(28,671744,null,0,r.f,[[8,null],[8,null],[8,null],[6,r.c]],{model:[0,"model"]},{update:"ngModelChange"}),o.Qb(2048,null,r.d,null,[r.f]),o.Ab(30,16384,null,0,r.e,[[4,r.d]],null,null),(l()(),o.Bb(31,0,null,0,2,"ion-button",[],null,[[null,"click"]],(function(l,n,u){var o=!0;return"click"===n&&(o=!1!==l.component.Login()&&o),o}),a.B,a.b)),o.Ab(32,49152,null,0,s.k,[o.j,o.p,o.F],null,null),(l()(),o.Tb(-1,0,["Login "]))],(function(l,n){var u=n.component;l(n,16,0,"Mail"),l(n,19,0,u.login.email),l(n,25,0,"Contrase\xf1a"),l(n,28,0,u.login.password)}),(function(l,n){l(n,15,0,o.Nb(n,21).ngClassUntouched,o.Nb(n,21).ngClassTouched,o.Nb(n,21).ngClassPristine,o.Nb(n,21).ngClassDirty,o.Nb(n,21).ngClassValid,o.Nb(n,21).ngClassInvalid,o.Nb(n,21).ngClassPending),l(n,24,0,o.Nb(n,30).ngClassUntouched,o.Nb(n,30).ngClassTouched,o.Nb(n,30).ngClassPristine,o.Nb(n,30).ngClassDirty,o.Nb(n,30).ngClassValid,o.Nb(n,30).ngClassInvalid,o.Nb(n,30).ngClassPending)}))}function f(l){return o.Vb(0,[(l()(),o.Bb(0,0,null,null,1,"app-login",[],null,null,null,L,C)),o.Ab(1,114688,null,0,h,[s.Hb,p.a,m.b,d.a],null,null)],(function(l,n){l(n,1,0)}),null)}var v=o.xb("app-login",h,f,{},{},[]),B=u("SVse"),A=u("VQoA"),N=u("iInd"),w=u("iQDS"),F=u("mXY3");class M{}u.d(n,"LoginModuleNgFactory",(function(){return y}));var y=o.yb(e,[],(function(l){return o.Kb([o.Lb(512,o.m,o.jb,[[8,[i.a,t.a,v]],[3,o.m],o.D]),o.Lb(4608,B.l,B.k,[o.z,[2,B.s]]),o.Lb(4608,s.c,s.c,[o.F,o.g]),o.Lb(4608,s.Hb,s.Hb,[s.c,o.m,o.w]),o.Lb(4608,s.Lb,s.Lb,[s.c,o.m,o.w]),o.Lb(4608,r.a,r.a,[]),o.Lb(4608,r.i,r.i,[]),o.Lb(1073742336,B.b,B.b,[]),o.Lb(1073742336,A.a,A.a,[]),o.Lb(1073742336,A.g,A.g,[]),o.Lb(1073742336,A.d,A.d,[]),o.Lb(1073742336,A.b,A.b,[]),o.Lb(1073742336,A.e,A.e,[]),o.Lb(1073742336,A.c,A.c,[]),o.Lb(1073742336,A.f,A.f,[]),o.Lb(1073742336,s.Eb,s.Eb,[]),o.Lb(1073742336,N.o,N.o,[[2,N.t],[2,N.m]]),o.Lb(1073742336,r.h,r.h,[]),o.Lb(1073742336,r.g,r.g,[]),o.Lb(1073742336,r.b,r.b,[]),o.Lb(1073742336,w.a,w.a,[]),o.Lb(1073742336,F.a,F.a,[]),o.Lb(1073742336,M,M,[]),o.Lb(1073742336,e,e,[]),o.Lb(1024,N.k,(function(){return[[{path:"",component:h}]]}),[])])}))}}]);